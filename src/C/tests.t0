" \\033[0m"   ::ANSI.REVERT

" \033[1;31m" ::ANSI.RED
" \033[0;32m" ::ANSI.GREEN


// Build a Tester class to perform tests and record statistics
{ let 0 :passed 0 :failed |
  { m |
    m switch
      'ping 42
      'score { f this |
        f { | passed++ passed " PASSED" } { | failed++ failed " FAILED" } ifelse
      }
      'test { script answer this |
        " Expect: " .$ script .$ "  -> " .$ answer . "  " .$
        script eval answer = this .score .$ .nl
      }
      'report { this |
        .nl
        " Tests Run: " .$ passed failed + . .nl
        "    PASSED: " .$ passed . .nl
        "    FAILED: " .$ failed . .nl
        .nl
      }
      { this | " unknown method: " .$ m .$ }
    end
  }
} ::Tester

// Create an instance of Tester
Tester :t

{ s | .nl .nl s .$ "  -------------------------------" .$  .nl } ::section

nop ::prompt

{ | t .test } ::test

'Logic section

" true  ! " false test
" false ! " true  test
" false false & " false test
" false true  & " false test
" true  false & " false test
" true  true  & " true  test
" false false | " false test
" false true  | " true  test
" true  false | " true  test
" true  true  | " true  test
" false { | false } && "  false test
" false { | true }  && "  false test
" true  { | false } && "  false test
" true  { | true }  && "  true  test

" false { | false } || "  false test
" false { | true }  || "  true  test
" true  { | false } || "  true  test
" true  { | true }  || "  true  test

" true false | true false & | " true test


'Comparators section

" 1 1 =  " true  test
" 1 2 =  " false test
" 1 1 != " false test
" 1 2 != " true  test
" 1 2 <  " true  test
" 2 1 <  " false test
" 2 2 <= " true  test
" 2 3 <= " true  test


'Arithmetic section

// TODO: bug space needed before end quotes
" 1 1 +        " 2 test
" 0 1 +        " 1 test
" 2 1 -        " 1 test
" 0 6 -        " -6 test
" 4 2 *        " 8 test
" 4 2 /        " 2 test
" 10 3 mod     " 1 test
" 2 8 ^        " 256 test
" 15 %         " 0.15 test
" 15 10 10 ^ * " 150000000000 test // scientific notation, distance from earth to sun in meters
" 5 neg        " -5 test


'Combinatorics section

" 1 fact  " 1 test
" 2 fact  " 2 test
" 10 fact " 3628800 test
" 10 2 P  " 90 test
" 10 2 C  " 45 test


'Stack section

" 1 2 drop    " 1 test
" 1 2 3 drop2 " 1 test
" 1 dup drop  " 1 test
" 2 10 swap / " 5 test

t .report
